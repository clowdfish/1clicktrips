<div>
  <ul class="result-list" ng-if="itineraries">
    <li class="result-list-item-container"
        ng-repeat="itinerary in itineraries"
        ng-init="itineraryIndex = $index">

      <span class="result-list-item-title">
        <h2>
          <span>Route {{ itineraryIndex + 1 }}</span>
          <span>{{ itinerary | titleExtractor }}</span>
          <a href="#">show on map</a>
        </h2>

        <span class="result-list-item-title-details">
          <span class="result-list-item-price">{{ itinerary['price'].toFixed(2) }}
            <i class="fa {{ itinerary['currency'] | currencyFormatter }}"></i>
          </span>
          <span class="result-list-item-duration">{{ itinerary['duration'] | durationFormatter : 'full' }}</span>
        </span>
      </span>

      <span class="result-list-item-timeline">
        <span class="result-list-item-start"
               ng-class="{ focus: !timing['targetDate'] }"></span>

        <span class="result-list-item">
          <span class="result-list-item-line"></span>

          <span ng-repeat="container in itineraries[itineraryIndex]['segmentsContainer']"
                ng-init="containerIndex = $index">

            <!-- do not show minor segments and no major walking segments -->
            <span ng-repeat="segment in container['alternatives'][getAlternativeIndex(itineraryIndex, containerIndex)]"
                  ng-if="segment['departureTime'] && (!showDetails && segment['isMajor'] || showDetails)"
                  ng-init="segmentIndex = $index">

              <span ng-if="segment['alternatives'][getTimingIndex(itineraryIndex, containerIndex, segmentIndex)]['segments']">
                <!-- do not show walking segments -->
                <trip-segment
                   ng-repeat="detailSegment in segment['alternatives'][getTimingIndex(itineraryIndex, containerIndex, segmentIndex)]['segments']"
                   ng-if="detailSegment['type'] != 1"
                   segment="detailSegment"
                   ratio="{{ dimensions.ratio }}"
                   show-details="{{ showDetails }}"
                   set-dimensions="setDimensions(data)"
                   define-left-margin="defineMarginLeft(time)"
                   select-alternative="selectAlternative(itineraryIndex, containerIndex, segmentIndex, alternativeIndex, timingIndex)">
                 </trip-segment>
              </span>
              <span ng-if="!segment['alternatives'][getTimingIndex(itineraryIndex, containerIndex, segmentIndex)]['segments']">
                <trip-segment
                  segment="segment"
                  ratio="{{ dimensions.ratio }}"
                  show-details="{{ showDetails }}"
                  set-dimensions="setDimensions(data)"
                  define-left-margin="defineMarginLeft(time)"
                  select-alternative="selectAlternative(itineraryIndex, containerIndex, segmentIndex, alternativeIndex, timingIndex)">
                </trip-segment>
              </span>
            </span>
          </span>
        </span>
        <span class="result-list-item-end"
              ng-class="{ focus: timing['targetDate'] }"></span>
      </span>

      <span class="result-list-item-footer">
        <span class="result-list-item-footer-details">
          <span class="result-list-item-price">
            {{ itinerary['price'].toFixed(2) }}
            <i class="fa {{ itinerary['currency'] | currencyFormatter }}"></i>
          </span>
          <span class="result-list-item-duration">{{ itinerary['duration'] | durationFormatter : 'full' }}</span>
        </span>

         <span class="result-list-item-footer-action">
          <a ng-click="selectTrip(itineraryIndex)" class="button">{{ 'result.list.select' | translate }}</a>
          <a class="result-list-item-footer-action-link" href="">show timing alternatives</a>
        </span>

        <span class="result-list-item-annotation"
               ng-if="!annotation">
          <span>*</span> {{ "Test to show some annotation" }}
        </span>
      </span>
    </li>
  </ul>
</div>