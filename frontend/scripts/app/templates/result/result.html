<section class="result" ng-show='itinerary == null'>
  <!-- WAITING ANIMATION -->
  <div class='result-waiting' >
    <span class="result-waiting-progress">
      {[ "result_searching" | translate ]}
    </span>
    <img class="result-waiting-animation" src='../images/spinner.gif'/>
  </div>
</section>

<section class="result" ng-show='itinerary != null'>
  <trip-result-wrapper
          itinerary="itinerary"
          show-alternative-vehicles-panel="showAlternativeVehiclesPanel"
          show-alternative-hotels-panel="showAlternativeHotelsPanel"
          alternative-vehicles="alternativeVehicles"
          alternative-hotels="alternativeHotels"
          alternative-left="alternativeLeft"
          alternative-top="alternativeTop" >

    <!-- RESULT SELECTION PANEL -->
    <div class="result-selection" ng-class="{ 'show': showSelectionPanel }">
      <div class="result-selection-toggle" ng-click="toggleSelectionPanel()"></div>
      <!-- REFINE SEARCH CONTROL -->
      <div class="result-selection-refine">
        <span class="fa fa-chevron-left result-selection-refine-button" ng-click="refineSearch()"></span>
        <span class="result-selection-refine-text">{[ "result_refine" | translate ]}</span>
      </div>
      <!-- SELECT RESULT TYPE CONTROL -->
      <div class="result-selection-type">
        <span class="result-selection-type-text">{[ "result_select" | translate ]}</span>
        <ul class="result-selection-type-list">
          <li class="result-selection-type-list-item" ng-class="{active: activeTrip == 0}" ng-click="findTripByBudget()">
            <i class="fa fa-dollar"></i>
            {[ "result_budget_title" | translate ]}
          </li>
          <li class="result-selection-type-list-item" ng-class="{active: activeTrip == 1, missing: itineraries.length<2 }" ng-click="findTripByTime()">
            <i class="fa fa-clock-o"></i>
            {[ "result_time_title" | translate ]}
          </li>
          <li class="result-selection-type-list-item" ng-class="{active: activeTrip == 2, missing: itineraries.length<3 }" ng-click="findTripByComfort()">
            <i class="fa fa-diamond"></i>
            {[ "result_comfort_title" | translate ]}
          </li>
        </ul>
      </div>
      <!-- RESULT LIST CONTROL -->
      <div class="result-selection-list">
        <div class="trip-segments-container">
          <trip-segments
                  itinerary="itinerary"
                  active-segments="activeSegments"
                  selected-segment="selectedSegment"
                  active-segments-number="activeSegmentsNumber"
                  show-map-fn="toggleSelectionPanel()">
          </trip-segments>

          <!-- ALTERNATIVES PANELS -->
          <div ng-show="showAlternativeVehiclesPanel"
               class="trip-segments-alternatives"
               ng-style="{left: alternativeLeft, top: alternativeTop, position: 'absolute'}">
            <alternative-mean-of-travel
                    itinerary="itinerary"
                    alternatives="alternativeVehicles"
                    active-segments="activeSegments"
                    active-segments-number="activeSegmentsNumber">
            </alternative-mean-of-travel>
          </div>

          <div ng-show="showAlternativeHotelsPanel"
               class="trip-segments-alternatives"
               ng-style="{left: alternativeLeft, top: alternativeTop, position: 'absolute'}">
            <alternative-hotels
                    itinerary="itinerary"
                    alternatives="alternativeHotels"
                    selected-segment="selectedSegment">
            </alternative-hotels>
          </div>
        </div>
      </div>
    </div>

    <!-- RESULT INFORMATION PANEL -->
    <div class="result-panel">
      <div class="result-panel-summary">
        <!-- RESULT  HEADER -->
        <div class="result-panel-summary-header">
          <span class="result-panel-summary-header-destination">{[ "result_destination_label" | translate ]}</span>
          <h2 class="result-panel-summary-header-title"><i class="fa fa-map-marker"></i>{[itinerary.outbound.destination.description]}</h2>
          <div class='result-panel-summary-header-timing'>
            {[ "general_from" | translate ]} <span class="result-panel-summary-header-timing-date">{[itinerary.startTime | date: "dd.MM.yyyy"]}</span> {[ "general_until" | translate ]} <span class="result-panel-summary-header-timing-date">{[itinerary.endTime | date: "dd.MM.yyyy"]}</span>
          </div>
        </div>
        <!-- RESULT SUMMARY -->
        <div class="result-panel-summary-details">
          <trip-summary itinerary="itinerary"></trip-summary>
        </div>
      </div>

      <div class="result-panel-controls">
        <span class="result-panel-controls-price">
          {[ itinerary.cost | price: itinerary.currency ]}
        </span>
        <span class="result-panel-controls-time">
          {[ itinerary.duration | durationToTime:"%h hrs %m mins" ]}
        </span>

        <div class="result-panel-controls-buttons">
          <a href="#" class="button--light" ng-click="addToFavorites()">
            <i class="fa fa-heart"></i>{[ "result_favorite" | translate ]}
          </a>
          <a href="#" class="button" ng-click="bookTrip()">
            <i class="fa fa-shopping-cart"></i>{[ "result_checkout" | translate ]}
          </a>
        </div>
      </div>
    </div>

    <!-- RESULT MAP CONTROL -->
    <div class="result-selection-toggle" ng-click="toggleSelectionPanel()" ng-if="isMobile && !showSelectionPanel"></div>
    <div class="result-map" ng-class="{ 'full-width': !showSelectionPanel }">
      <map itinerary="itinerary"
           active-segments="activeSegments"
           selected-segment="selectedSegment"></map>
    </div>
  </trip-result-wrapper>
</section>
